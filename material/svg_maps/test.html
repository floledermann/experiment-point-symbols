<!doctype html>
<html>
<head>
</head>
<body>
<script>
let svgImg = document.createElement("object");
document.body.appendChild(svgImg);

let pixelWidth = 300;
let resPPI = 96;
let sizeMM = 4;
let baseIconSize = 15;

svgImg.type = "image/svg+xml";
svgImg.data = "map1.svg";
//svgImg.style.width = pixelWidth + "px";
svgImg.width = pixelWidth;

svgImg.addEventListener("load", e => {
  //let icons = "airport,airfield,bar,hospital".split(",").map(f => "icons/"+f+".svg");
  let icons = "car,car-rental,car-repair,road-accident".split(",").map(f => "icons/"+f+".svg");
  let svg = svgImg.getSVGDocument();
  let sizePX = sizeMM * resPPI / 25.4 * 1000 / pixelWidth;
  let scaleFactor = sizePX / baseIconSize;
  let offset = baseIconSize * 2 * pixelWidth / 1000 / 2; /// scaleFactor;
  
  let positions = svg.querySelectorAll('g[id="map: multipoint_rural"] > g[fill="#ff0707"]');
  
  console.log(positions);
  
  for (let i=0; i<positions.length; i++) {
    //let g = svg.getElementById("position"+i);
    let g = positions[i];
    //g.innerHTML = '<image href="' + icons[Math.floor(Math.random()*icons.length)] + '" transform="scale(' + scaleFactor + ')" x="' + (-offset) + '" y="-' + offset + '" />';
  }
});

</script>
</body>
</html>